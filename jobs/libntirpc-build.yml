- job:
    name: libntirpc-build
    node: cico-workspace
    description: 'Build RPMs for libntirpc.'
    project-type: freestyle
    concurrent: false
    allow-manual-triggers: false 

    scm:
    - ci-tests

    properties:
    - discarder
    - nfs-ntirpc

    parameters:
    - string:
        default: "$WORKSPACE/ci-tests/build_scripts/libntirpc-build/build-libntirpc.sh"
        description: 'Test script to execute on the reserved machine.'
        name: TEST_SCRIPT
    - string:
        default: "$WORKSPACE/ci-tests/build_scripts/libntirpc-build/template_files"
        description: 'URL pointing to the directory with the templates for when building the source RPM and .repo file.'
        name: TEMPLATES_URL
    - centos_variables

    builders:
    - shell: !include-raw: scripts/common/get-node.sh
    - shell: |
        bash $WORKSPACE/ci-tests/build_scripts/libntirpc-build/basic-gluster-duffy.sh

    wrappers:
    - cleanup-ws

    publishers:
    - post_build_task_return-node
    - archive:
        artifacts: 'x86_64/*.log'
