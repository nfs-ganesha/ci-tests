- job:
    name: posix-compliance 
    node: cico-workspace
    description: "Run posix compliance testsuite (NFSv4.0) against the latest build of Ganesha with FSAL_GLUSTER.\n\nposix compliance test suite cloned from, https://github.com/ffilz/ntfs-3g-pjd-fstest.git"
    project-type: freestyle
    concurrent: false
    allow-manual-triggers: true

    scm:
    - ci-tests

    properties:
    - build-discarder:
        days-to-keep: 7
        num-to-keep: 7
    - nfs-github

    parameters:
    - string:
        default: "$WORKSPACE/ci-tests/build_scripts/common/basic-gluster.sh"
        description: Test script to execute on the reserved machine acting as a server.
        name: SERVER_TEST_SCRIPT
    - string:
        default: "$WORKSPACE/ci-tests/build_scripts/posix-compliance/client.sh"
        description: Test script to execute on the reserved machine acting as a client.
        name: CLIENT_TEST_SCRIPT
    - nfs_variables:
        export_var: 'posix_comp'
    - gerrit_variables
    - centos_variables

    triggers:
    - gerrithub-trigger:
        option: 'posix_compliance'

    builders:
    - get-node
    - shell: !include-raw: scripts/posix_compliance.sh

    wrappers:
    - gerrithub_key
    - cleanup-ws

    publishers:
    - post_build_task_return-node
